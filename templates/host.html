<!DOCTYPE html>
<html>
<head>
<title>ECOH Graduation Quiz 2025 ğŸ“</title>
<script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
<style>
body { background: linear-gradient(to right, #ffe29f, #ffa99f); text-align: center; font-family: 'Arial', sans-serif; }
h1 { font-size: 50px; color: darkblue; margin-top: 20px; text-shadow: 2px 2px #fff;}
h2 { font-size: 40px; margin: 20px; }
button { font-size: 28px; padding: 20px 60px; margin: 20px; border-radius: 20px; background: #ff4081; color: white; border: none; }
#timer { font-size: 80px; color: #ff3d00; margin-top: 20px; }
#question { font-size: 45px; color: #333; margin: 40px; }
li { font-size: 32px; list-style: none; padding: 5px; }
#correct { font-size: 35px; margin-top: 30px; color: green; }
</style>
</head>
<body>
<h1>ğŸ“ ECOH Graduation Quiz ğŸ‰</h1>

<h2>Waiting Room</h2>
<ul id="waiting"></ul>
<button onclick="startGame()">Start Game</button>

<div id="timer"></div>
<h2 id="question"></h2>
<div id="correct"></div>

<h2>Leaderboard</h2>
<ul id="scores"></ul>

<div id="confetti" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;"></div>

<script>
let socket = io();

socket.on('waiting', data => {
  document.getElementById('waiting').innerHTML = data.players.map(p => `<li>ğŸ¯ ${p}</li>`).join('');
});

socket.on('game_start', () => {
  document.querySelector('button').style.display = 'none';
  document.getElementById('waiting').innerHTML = '';
});

socket.on('question', data => {
  document.getElementById('question').innerText = data.question;
  document.getElementById('correct').innerText = '';
});

socket.on('timer', data => {
  document.getElementById('timer').innerText = data.time;
});

socket.on('reveal', data => {
  document.getElementById('correct').innerText = "âœ… Correct Answer: " + data.answer;
});

socket.on('leaderboard', data => {
  document.getElementById('scores').innerHTML = data.scores.map((s,i) => {
    let trophy = i==0 ? 'ğŸ† ' : (i==1?'ğŸ¥ˆ ':'ğŸ¥‰ ');
    return `<li>${trophy}${s[0]}: ${s[1]}</li>`;
  }).join('');
});

socket.on('game_over', () => {
  startConfetti();
});

function startGame() {
  socket.emit('start_game');
}

function startConfetti() {
  for (let i = 0; i < 100; i++) {
    let div = document.createElement('div');
    div.style.position = 'absolute';
    div.style.top = Math.random()*100 + 'vh';
    div.style.left = Math.random()*100 + 'vw';
    div.style.fontSize = (Math.random()*30+20)+'px';
    div.style.transform = `rotate(${Math.random()*360}deg)`;
    div.innerText = 'ğŸ‰';
    document.getElementById('confetti').appendChild(div);
  }
}
</script>
</body>
</html>
